{% extends "index.html" %}

{% block title %}Compra exitosa | Mysterio{% endblock %}

{% block contenido %}
<section class="max-w-4xl mx-auto px-4 md:px-6 py-16">
  <div class="glass-strong rounded-3xl border border-white/10 shadow-glow p-8 md:p-12 text-center overflow-hidden relative">
    <div class="absolute -top-28 -left-28 h-72 w-72 rounded-full bg-mystery-success/20 blur-[90px]"></div>
    <div class="absolute -bottom-28 -right-28 h-72 w-72 rounded-full bg-mystery-cyan/15 blur-[90px]"></div>

    <div class="relative">
      <div class="mx-auto h-16 w-16 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center mb-6">
        <i class="fa-solid fa-circle-check text-mystery-success text-3xl"></i>
      </div>

      <h1 class="text-3xl md:text-4xl font-extrabold">
        ¡Compra confirmada!
      </h1>
      <p class="mt-3 text-white/70 leading-relaxed">
        Tu pedido de <span class="font-bold text-mystery-gold">{{ total_cajas }}</span> caja{{ total_cajas|pluralize }} ya está en preparación.
      </p>

      <!-- Código único de rastreo -->
      <div class="mt-8 glass rounded-3xl border border-white/10 p-8">
        <div class="flex items-center justify-center gap-4 mb-4">
          <div class="h-16 w-16 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center">
            <i class="fa-solid fa-barcode text-mystery-gold text-3xl"></i>
          </div>
        </div>
        
        <p class="text-white/55 text-xs uppercase tracking-widest mb-3">Código de rastreo único</p>
        <p class="font-mono text-3xl tracking-widest text-mystery-gold font-extrabold mb-4">{{ codigo_rastreo }}</p>
        
        <p class="text-white/60 text-sm leading-relaxed mb-4">
          Todas tus cajas se enviarán juntas con este código de rastreo.
        </p>
        
        <a href="{% url 'rastrear_pedido' %}?guia={{ codigo_rastreo }}" class="inline-flex items-center gap-2 text-sm font-semibold text-mystery-cyan hover:text-white transition-colors">
          Ver rastreo <i class="fa-solid fa-arrow-right"></i>
        </a>
      </div>

      <!-- Resumen del pedido -->
      <div class="mt-6 glass rounded-2xl border border-white/10 p-6 text-left">
        <p class="text-white/55 text-xs uppercase tracking-widest mb-4">Resumen del pedido</p>
        <div class="space-y-3">
          <div class="flex justify-between text-sm">
            <span class="text-white/70">Total de cajas:</span>
            <span class="font-bold">{{ total_cajas }}</span>
          </div>
          <div class="flex justify-between text-sm">
            <span class="text-white/70">Productos incluidos:</span>
            <span class="font-bold">{{ envio.productos.count }}</span>
          </div>
          <div class="flex justify-between text-sm">
            <span class="text-white/70">Estado:</span>
            <span class="text-mystery-cyan font-bold">Preparando caja</span>
          </div>
        </div>
      </div>

      <!-- Información adicional -->
      <div class="mt-6 glass rounded-2xl border border-white/10 p-6">
        <p class="text-white/55 text-xs uppercase tracking-widest mb-3">Siguiente paso</p>
        <p class="text-white/70 text-sm leading-relaxed">
          Guarda tu código. Si ya tienes guía de courier, aparecerá en la pantalla de rastreo.
        </p>
      </div>

      <!-- Botones de acción -->
      <div class="mt-8 flex flex-col sm:flex-row gap-3 justify-center">
        <a href="{% url 'perfil' %}" class="px-7 py-3 rounded-full border border-white/15 hover:bg-white/5 transition-colors font-semibold text-sm uppercase tracking-widest inline-flex items-center justify-center gap-2">
          <i class="fa-solid fa-user"></i> Ver mis pedidos
        </a>
        <a href="{% url 'home' %}" class="px-7 py-3 rounded-full bg-mystery-purple-gradient shadow-glow-pink font-semibold text-sm uppercase tracking-widest hover:-translate-y-0.5 transition-transform inline-flex items-center justify-center gap-2">
          <i class="fa-solid fa-wand-magic-sparkles"></i> Seguir explorando
        </a>
      </div>
    </div>
  </div>
</section>
{% endblock %}
