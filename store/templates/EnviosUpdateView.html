{% extends 'index.html' %} {% load widget_tweaks %} {% block contenido %}
<div class="max-w-7xl mx-auto px-4 md:px-6 py-20">
    <div class="mb-8">
        <h2 class="text-2xl md:text-3xl font-extrabold mb-2">
            Packing: Envio <span class="text-mystery-cyan">#{{ object.id }}</span>
        </h2>
        <p class="text-white/60">Destino: <strong class="text-white">{{ object.ciudad }}, {{ object.pais }}</strong></p>
    </div>

    <form method="post" class="mystery-form">
        {% csrf_token %}
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-2 glass-card p-6 md:p-8 rounded-2xl border-2 border-white/10">
                <h3 class="text-mystery-cyan font-semibold text-xl mb-6">Contenido Sugerido</h3>
                {% for producto in items_a_empacar %}
                <div class="flex justify-between items-center glass-card bg-white/5 p-4 rounded-xl mb-3">
                    <span class="text-white">{{ producto.nombre }}</span>
                    <input type="checkbox" required class="w-5 h-5 accent-mystery-cyan" />
                </div>
                {% endfor %}

                <div class="mt-8 p-6 bg-black/30 rounded-xl border border-white/10">
                    <div class="flex justify-between mb-3">
                        <span class="text-white/60">Pagado por cliente:</span>
                        <span class="text-mystery-success font-semibold">${{ finanzas.pagado }}</span>
                    </div>
                    <div class="flex justify-between mb-3">
                        <span class="text-white/60">Costo inventario:</span>
                        <span class="text-mystery-pink font-semibold">-${{ finanzas.costo }}</span>
                    </div>
                    <hr class="border-white/10 my-4" />
                    <div class="flex justify-between font-bold text-lg">
                        <span class="text-white">Margen Operativo:</span>
                        <span class="text-mystery-cyan">${{ finanzas.margen }}</span>
                    </div>
                </div>
            </div>

            <div class="glass-card p-6 md:p-8 rounded-2xl border-2 border-white/10">
                <h3 class="text-xl font-semibold mb-6">Finalizar Despacho</h3>
                <div class="mb-6">
                    <label class="block text-mystery-cyan font-semibold mb-2 text-sm">
                        Código Courier (Servientrega/FedEx)
                    </label>
                    {{ form.numero_guia|add_class:"cyber-input" }}
                </div>
                <div class="mb-6">
                    <label class="block text-mystery-cyan font-semibold mb-2 text-sm">Actualizar Estado</label>
                    {{ form.estado|add_class:"cyber-input" }}
                </div>
                <button
                    type="submit"
                    class="w-full px-6 py-3 rounded-full bg-mystery-purple-gradient text-white font-semibold text-sm uppercase tracking-wide hover:-translate-y-1 hover:shadow-lg hover:shadow-mystery-pink/40 transition-all duration-300"
                >
                    Confirmar Envío
                </button>
            </div>
        </div>
    </form>
    {% endblock %}
</div>
